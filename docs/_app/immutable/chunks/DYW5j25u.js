import{o as l,_ as m,a3 as h,$ as v,J as _,R as b,n as g,M as y,an as k,T as M,ao as p,V as w,ap as D,aq as x,a as A,ar as B,s as F,as as N}from"./DOyfLbYF.js";class T{anchor;#s=new Map;#t=new Map;#e=new Map;#r=!0;constructor(e,t=!0){this.anchor=e,this.#r=t}#a=()=>{var e=l;if(this.#s.has(e)){var t=this.#s.get(e),s=this.#t.get(t);if(s)m(s);else{var a=this.#e.get(t);a&&(this.#t.set(t,a.effect),this.#e.delete(t),a.fragment.lastChild.remove(),this.anchor.before(a.fragment),s=a.effect)}for(const[i,n]of this.#s){if(this.#s.delete(i),i===e)break;const f=this.#e.get(n);f&&(h(f.effect),this.#e.delete(n))}for(const[i,n]of this.#t){if(i===t)continue;const f=()=>{if(Array.from(this.#s.values()).includes(i)){var u=document.createDocumentFragment();k(n,u),u.append(_()),this.#e.set(i,{effect:n,fragment:u})}else h(n);this.#t.delete(i)};this.#r||!s?v(n,f,!1):f()}}};#i=e=>{this.#s.delete(e);const t=Array.from(this.#s.values());for(const[s,a]of this.#e)t.includes(s)||(h(a.effect),this.#e.delete(s))};ensure(e,t){var s=l,a=M();if(t&&!this.#t.has(e)&&!this.#e.has(e))if(a){var i=document.createDocumentFragment(),n=_();i.append(n),this.#e.set(e,{effect:b(()=>t(n)),fragment:i})}else this.#t.set(e,b(()=>t(this.anchor)));if(this.#s.set(s,e),a){for(const[f,c]of this.#t)f===e?s.skipped_effects.delete(c):s.skipped_effects.add(c);for(const[f,c]of this.#e)f===e?s.skipped_effects.delete(c.effect):s.skipped_effects.add(c.effect);s.oncommit(this.#a),s.ondiscard(this.#i)}else g&&(this.anchor=y),this.#a()}}let o=!1,d=Symbol();function U(r,e,t){const s=t[e]??={store:null,source:w(void 0),unsubscribe:p};if(s.store!==r&&!(d in t))if(s.unsubscribe(),s.store=r??null,r==null)s.source.v=void 0,s.unsubscribe=p;else{var a=!0;s.unsubscribe=D(r,i=>{a?s.source.v=i:F(s.source,i)}),a=!1}return r&&d in t?x(r):A(s.source)}function $(r,e){return r.set(e),e}function q(){const r={};function e(){B(()=>{for(var t in r)r[t].unsubscribe();N(r,d,{enumerable:!1,value:!0})})}return[r,e]}function C(r,e,t){return r.set(t),e}function E(r){var e=o;try{return o=!1,[r(),o]}finally{o=e}}export{T as B,U as a,$ as b,E as c,C as d,q as s};
