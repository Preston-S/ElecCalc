import{f as d,a as p,e as la}from"../chunks/NmPVEbss.js";import{i as na}from"../chunks/MCpOFegH.js";import{aj as oa,ar as ca,as as ma,at as B,al as pa,ak as b,u as v,ao as da,a,$ as ua,d as _a,s as fa,am as r,ap as t,aq as s}from"../chunks/C7s_4A4C.js";import{s as o}from"../chunks/BErm2lkx.js";import{i as F}from"../chunks/ZSZ7rd2r.js";import{e as ya,i as za}from"../chunks/HbtteHjj.js";import{h as ga,e as Sa}from"../chunks/Bn6f7_XN.js";import{a as ha,s as N}from"../chunks/BnFVzCsZ.js";import{p as xa}from"../chunks/B5jZzxFo.js";import{P as $a}from"../chunks/DIoA15Ze.js";var ba=d('<li class="svelte-1m639vz"><span class="svelte-1m639vz"> </span> <span class="svelte-1m639vz"> </span></li>'),Ua=d('<ul class="item-list svelte-1m639vz"></ul>'),Da=d("<p>No items in this estimate.</p>"),La=d('<div class="receipt-details svelte-1m639vz"><p class="date svelte-1m639vz"> </p> <div class="section svelte-1m639vz"><h2 class="svelte-1m639vz">Itemized Breakdown</h2> <!></div> <hr class="svelte-1m639vz"/> <div class="section svelte-1m639vz"><h2 class="svelte-1m639vz">Summary</h2> <div class="summary-item svelte-1m639vz"><span class="svelte-1m639vz">Subtotal</span> <span class="svelte-1m639vz"> </span></div> <div class="summary-item svelte-1m639vz"><span class="svelte-1m639vz"> </span> <span class="svelte-1m639vz"> </span></div> <div class="summary-item svelte-1m639vz"><span class="svelte-1m639vz">Tax</span> <span class="svelte-1m639vz"> </span></div> <div class="summary-item total svelte-1m639vz"><span class="svelte-1m639vz">Total</span> <span class="svelte-1m639vz"> </span></div></div></div> <button class="print-button no-print svelte-1m639vz">Print or Save as PDF</button>',1),ka=d('<p class="error-message svelte-1m639vz">Estimate not found.</p>'),wa=d('<!> <div class="container svelte-1m639vz"><!></div>',1);function Na(R,V){oa(V,!1);const U=()=>N(xa,"$page",L),D=()=>N(Sa,"$estimateHistory",L),[L,A]=ha();let e=ua(null);function G(){window.print()}ca(()=>(U(),D()),()=>{const i=parseInt(U().params.id,10);fa(e,D().find(m=>m.id===i))}),ma(),na();var k=wa();ga("1m639vz",i=>{b(()=>{da.title=`View Estimate: ${a(e),v(()=>a(e)?a(e).name:"")??""}`},void 0,void 0,void 0,!0)});var w=B(k);{let i=_a(()=>(a(e),v(()=>a(e)?a(e).name:"Estimate Details")));$a(w,{get title(){return a(i)},backHref:"/ElecCalc/history"})}var H=r(w,2),J=t(H);{var K=i=>{var m=La(),_=B(m),f=t(_),O=t(f);s(f);var y=r(f,2),Q=r(t(y),2);{var W=n=>{var c=Ua();ya(c,5,()=>(a(e),v(()=>a(e).items)),za,(x,l)=>{var u=ba(),$=t(u),ra=t($);s($);var j=r($,2),va=t(j,!0);s(j),s(u),b(ia=>{o(ra,`${a(l),v(()=>a(l).name)??""} (x${a(l),v(()=>a(l).quantity)??""})`),o(va,ia)},[()=>(a(l),v(()=>(a(l).price*a(l).quantity).toLocaleString("en-US",{style:"currency",currency:"USD"})))]),p(x,u)}),s(c),p(n,c)},X=n=>{var c=Da();p(n,c)};F(Q,n=>{a(e),v(()=>a(e).items.length>0)?n(W):n(X,!1)})}s(y);var q=r(y,4),z=r(t(q),2),E=r(t(z),2),Y=t(E,!0);s(E),s(z);var g=r(z,2),S=t(g),Z=t(S);s(S);var P=r(S,2),aa=t(P,!0);s(P),s(g);var h=r(g,2),I=r(t(h),2),ea=t(I,!0);s(I),s(h);var C=r(h,2),T=r(t(C),2),sa=t(T,!0);s(T),s(C),s(q),s(_);var ta=r(_,2);b((n,c,x,l,u)=>{o(O,`Saved on ${n??""}`),o(Y,c),o(Z,`Labor (${a(e),v(()=>a(e).hours)??""} hrs)`),o(aa,x),o(ea,l),o(sa,u)},[()=>(a(e),v(()=>new Date(a(e).date).toLocaleDateString())),()=>(a(e),v(()=>a(e).subtotal.toLocaleString("en-US",{style:"currency",currency:"USD"}))),()=>(a(e),v(()=>a(e).laborCost.toLocaleString("en-US",{style:"currency",currency:"USD"}))),()=>(a(e),v(()=>a(e).tax.toLocaleString("en-US",{style:"currency",currency:"USD"}))),()=>(a(e),v(()=>a(e).total.toLocaleString("en-US",{style:"currency",currency:"USD"})))]),la("click",ta,G),p(i,m)},M=i=>{var m=ka();p(i,m)};F(J,i=>{a(e)?i(K):i(M,!1)})}s(H),p(R,k),pa(),A()}export{Na as component};
