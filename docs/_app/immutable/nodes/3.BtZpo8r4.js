import{f as x,e as V,a as I}from"../chunks/CDZZ00qL.js";import{i as X}from"../chunks/BuwtjDum.js";import{T as ue,aa as ae,a3 as ce,D as de,aU as me,aV as fe,x as P,W as pe,a6 as Y,aW as se,z as U,a7 as N,m as e,a8 as j,ac as n,a9 as d,a4 as S,aX as _e,ad as s,b as A,aY as be,ae as ye,af as ze,aw as Z,ab as $e}from"../chunks/BI79krja.js";import{s as L}from"../chunks/fG78sGWb.js";import{m as he,h as ge,l as we,t as Ie}from"../chunks/nyx9Xw70.js";import{r as re}from"../chunks/BiOTNO3a.js";import{b as ie}from"../chunks/BIRmhu5c.js";import{s as k,a as B,c as xe,b as M}from"../chunks/BkARbO7P.js";import{g as Se}from"../chunks/CtWI9nSP.js";import{i as ne}from"../chunks/B1b7_lMJ.js";import{e as le}from"../chunks/CbhNiVZy.js";import{t as ee,a as ke}from"../chunks/zuxcmlgg.js";import{f as qe}from"../chunks/BviiYr3T.js";import{f as te}from"../chunks/BI5KFv7B.js";function oe(t,v,r=!1){if(t.multiple){if(v==null)return;if(!de(v))return me();for(var i of t.options)i.selected=v.includes(T(i));return}for(i of t.options){var _=T(i);if(fe(_,v)){i.selected=!0;return}}(!r||v!==void 0)&&(t.selectedIndex=-1)}function Re(t){var v=new MutationObserver(()=>{oe(t,t.__value)});v.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ce(()=>{v.disconnect()})}function Ue(t,v,r=v){var i=new WeakSet,_=!0;ue(t,"change",m=>{var u=m?"[selected]":":checked",l;if(t.multiple)l=[].map.call(t.querySelectorAll(u),T);else{var b=t.querySelector(u)??t.querySelector("option:not([disabled])");l=b&&T(b)}r(l),P!==null&&i.add(P)}),ae(()=>{var m=v();if(t===document.activeElement){var u=pe??P;if(i.has(u))return}if(oe(t,m,_),_&&m===void 0){var l=t.querySelector(":checked");l!==null&&(m=T(l),r(m))}t.__value=m,_=!1}),Re(t)}function T(t){return"__value"in t?t.__value:t.value}var Le=x("<option disabled selected>Add materials in settings</option>"),Ce=x("<option> </option>"),De=x('<div class="item-selector svelte-1ss7k5a"><select class="svelte-1ss7k5a"><!><!></select> <input type="number" min="1" class="svelte-1ss7k5a"/> <button class="svelte-1ss7k5a">Add</button></div>');function Ee(t,v){Y(v,!1);const r=()=>k(he,"$materials",_),i=()=>k(u,"$estimateItems",_),[_,m]=B(),u=se("estimateItems");let l=U(r().length>0?r()[0].id:null),b=U(1);function q(){if(!e(l)){alert("Please select an item.");return}const a=r().find(c=>c.id===e(l));if(!a)return;const z=i().findIndex(c=>c.id===e(l));z>-1?(xe(u,A(i)[z].quantity+=e(b),A(i)),M(u,[...i()])):M(u,[...i(),{...a,quantity:e(b)}]),S(b,1)}X();var y=De(),o=n(y);N(()=>{e(l),_e(()=>{r()})});var f=n(o);{var $=a=>{var z=Le();I(a,z)};ne(f,a=>{r().length===0&&a($)})}var h=d(f);le(h,1,r,a=>a.id,(a,z)=>{var c=Ce(),C=n(c,!0);s(c);var g={};N(()=>{L(C,e(z).name),g!==(g=e(z).id)&&(c.value=(c.__value=e(z).id)??"")}),I(a,c)}),s(o);var p=d(o,2);re(p);var w=d(p,2);s(y),Ue(o,()=>e(l),a=>S(l,a)),ie(p,()=>e(b),a=>S(b,a)),V("click",w,q),I(t,y),j(),m()}var He=x('<p class="empty-message svelte-302u75">No items added yet.</p>'),Ae=x('<li class="svelte-302u75"><div class="item-details"><span class="item-name svelte-302u75"> </span> <span class="item-qty svelte-302u75"> </span></div> <div class="item-actions svelte-302u75"><span class="item-total svelte-302u75"> </span> <button class="remove-btn svelte-302u75">&times;</button></div></li>'),Te=x('<ul class="item-list svelte-302u75"></ul>'),We=x('<div class="item-list-container svelte-302u75"><!></div>');function Fe(t,v){Y(v,!1);const r=()=>k(m,"$estimateItems",i),[i,_]=B(),m=se("estimateItems");function u(o){M(m,r().filter(f=>f.id!==o))}X();var l=We(),b=n(l);{var q=o=>{var f=He();I(o,f)},y=o=>{var f=Te();le(f,13,r,$=>$.id,($,h)=>{var p=Ae(),w=n(p),a=n(w),z=n(a,!0);s(a);var c=d(a,2),C=n(c);s(c),s(w);var g=d(w,2),D=n(g),E=n(D,!0);s(D);var H=d(D,2);s(g),s(p),N((W,O)=>{L(z,e(h).name),L(C,`${e(h).quantity??""} Ã— ${W??""}`),L(E,O)},[()=>e(h).price.toLocaleString("en-US",{style:"currency",currency:"USD"}),()=>(e(h).quantity*e(h).price).toLocaleString("en-US",{style:"currency",currency:"USD"})]),V("click",H,()=>u(e(h).id)),ee(1,p,()=>te),ee(2,p,()=>te),ke(p,()=>qe,()=>({duration:300})),I($,p)}),s(f),I(o,f)};ne(b,o=>{r().length===0?o(q):o(y,!1)})}s(l),I(t,l),j(),_()}var Ne=x('<div class="container svelte-z2duwz"><header class="svelte-z2duwz"><h1 class="svelte-z2duwz">New Estimate</h1></header> <main><div class="section svelte-z2duwz"><label for="hours" class="svelte-z2duwz">Estimated Labor Hours</label> <input id="hours" type="number" step="0.5" class="svelte-z2duwz"/></div> <hr class="svelte-z2duwz"/> <div class="section svelte-z2duwz"><!></div> <div class="item-list-section svelte-z2duwz"><!></div> <div class="summary-section svelte-z2duwz"><h2 class="svelte-z2duwz">Running Total</h2> <div class="summary-item svelte-z2duwz"><span>Subtotal</span> <span> </span></div> <div class="summary-item total svelte-z2duwz"><span>Total (incl. labor & tax)</span> <span> </span></div></div> <div class="button-container svelte-z2duwz"><button class="cta-button svelte-z2duwz">Review Final Receipt</button></div></main></div>');function tt(t,v){Y(v,!1);const r=()=>k(b,"$estimateItems",u),i=()=>k(q,"$estimatedHours",u),_=()=>k(we,"$laborRate",u),m=()=>k(Ie,"$taxRate",u),[u,l]=B(),b=Z([]),q=Z(0);be("estimateItems",b);let y=U(0),o=U(0),f=U(0),$=U(0);function h(){Se("receipt",{state:{items:r(),subtotal:e(y),laborCost:e(o),tax:e(f),total:e($),hours:i()}})}ye(()=>(e(y),r(),e(o),i(),_(),e(f),m()),()=>{S(y,r().reduce((R,F)=>R+F.price*F.quantity,0)),S(o,i()*_()),S(f,(e(y)+e(o))*m()),S($,e(y)+e(o)+e(f))}),ze(),X();var p=Ne();ge("z2duwz",R=>{ae(()=>{$e.title="Create Estimate"})});var w=d(n(p),2),a=n(w),z=d(n(a),2);re(z),s(a);var c=d(a,4),C=n(c);Ee(C,{}),s(c);var g=d(c,2),D=n(g);Fe(D,{}),s(g);var E=d(g,2),H=d(n(E),2),W=d(n(H),2),O=n(W,!0);s(W),s(H);var G=d(H,2),J=d(n(G),2),ve=n(J,!0);s(J),s(G),s(E);var K=d(E,2),Q=n(K);s(K),s(w),s(p),N((R,F)=>{L(O,R),L(ve,F),Q.disabled=(r(),A(()=>r().length===0))},[()=>(e(y),A(()=>e(y).toLocaleString("en-US",{style:"currency",currency:"USD"}))),()=>(e($),A(()=>e($).toLocaleString("en-US",{style:"currency",currency:"USD"})))]),ie(z,i,R=>M(q,R)),V("click",Q,h),I(t,p),j(),l()}export{tt as component};
