import{f as b,e as G,a as m,s as l}from"../chunks/Crqtyrhl.js";import{i as Lt}from"../chunks/CXhA1Kpn.js";import{aa as $t,ak as wt,ad as Ut,af as J,a as s,ae as Dt,al as kt,ai as e,ah as a,s as z,V as W,ag as It,aj as t,am as Pt}from"../chunks/_tk8g6n2.js";import{i as Ht}from"../chunks/CgKErwGf.js";import{e as zt}from"../chunks/CPYbfN0Y.js";import{h as Ct,c as Rt,e as X}from"../chunks/DSTXjmi1.js";import{r as Tt}from"../chunks/D2OtXZAi.js";import{b as Et}from"../chunks/DDs-nSUI.js";import{s as Ft,a as C,b as Mt}from"../chunks/D5qhZAsH.js";import{p as Nt}from"../chunks/C4bdGf-L.js";import{P as qt}from"../chunks/fMrBk49t.js";var jt=b('<tr><td class="svelte-b2338r"> </td><td class="svelte-b2338r"> </td><td class="svelte-b2338r"> </td><td class="svelte-b2338r"> </td></tr>'),Bt=b('<table class="item-table svelte-b2338r"><thead><tr><th class="svelte-b2338r">Item</th><th class="svelte-b2338r">Quantity</th><th class="svelte-b2338r">Price</th><th class="svelte-b2338r">Total</th></tr></thead><tbody></tbody></table>'),Kt=b("<p>No items in this estimate.</p>"),Ot=b('<!> <div class="container svelte-b2338r"><div class="receipt-details svelte-b2338r"><header class="receipt-header svelte-b2338r"><div class="company-logo svelte-b2338r"><svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2L2 7l10 5l10-5l-10-5zm0 11.5L3.5 9L12 4.5L20.5 9L12 13.5z"></path><path fill="currentColor" d="M2 17l10 5l10-5l-10-5l-10 5zm10 3.5L3.5 16L12 11.5L20.5 16L12 20.5z"></path></svg></div> <div class="company-details svelte-b2338r"><h2 class="svelte-b2338r"> </h2> <p class="svelte-b2338r"> <br/> </p> <p class="svelte-b2338r"> </p></div></header> <div class="section svelte-b2338r"><h2 class="svelte-b2338r">Items</h2> <!></div> <div class="summary-section svelte-b2338r"><div class="summary-item svelte-b2338r"><span class="svelte-b2338r">Subtotal</span> <span class="svelte-b2338r"> </span></div> <div class="summary-item svelte-b2338r"><span class="svelte-b2338r"> </span> <span class="svelte-b2338r"> </span></div> <div class="summary-item svelte-b2338r"><span class="svelte-b2338r">Tax</span> <span class="svelte-b2338r"> </span></div> <div class="summary-item total svelte-b2338r"><span class="svelte-b2338r">Total</span> <span class="svelte-b2338r"> </span></div></div> <footer class="receipt-footer svelte-b2338r"><p>Thank you for your business!</p></footer></div> <div class="actions no-print svelte-b2338r"><div class="save-section svelte-b2338r"><input type="text" placeholder="Name this estimate (e.g., Kitchen Reno)" class="svelte-b2338r"/> <button class="save-button svelte-b2338r">Save Estimate</button></div> <button class="print-button svelte-b2338r">Print or Save as PDF</button></div></div>',1);function ae(Y,Z){$t(Z,!1);const u=()=>C(Nt,"$page",h),tt=()=>C(X,"$estimateHistory",h),v=()=>C(Rt,"$companyInfo",h),[h,et]=Ft();let i=W({items:[],subtotal:0,laborCost:0,tax:0,total:0,hours:0}),p=W("");wt(()=>{u().state&&u().state.items?z(i,u().state):history.state&&history.state.items&&z(i,history.state)});function at(){window.print()}function st(){if(!s(p).trim()){alert("Please enter a name for the estimate.");return}const r={id:Date.now(),name:s(p),date:new Date().toISOString(),...s(i)};Mt(X,[r,...tt()]),window.location.href="/history"}Lt();var R=Ot();Ct("b2338r",r=>{kt(()=>{It.title="Final Receipt"})});var T=Ut(R);qt(T,{title:"Final Receipt",backHref:"/"});var E=a(T,2),_=e(E),y=e(_),F=a(e(y),2),f=e(F),rt=e(f,!0);t(f);var g=a(f,2),M=e(g,!0),lt=a(M,2,!0);t(g);var N=a(g,2),it=e(N);t(N),t(F),t(y);var S=a(y,2),ot=a(e(S),2);{var vt=r=>{var o=Bt(),d=a(e(o));zt(d,5,()=>s(i).items,n=>n.id,(n,c)=>{var k=jt(),I=e(k),_t=e(I,!0);t(I);var P=a(I),yt=e(P,!0);t(P);var H=a(P),ft=e(H,!0);t(H);var A=a(H),gt=e(A,!0);t(A),t(k),J((St,xt)=>{l(_t,s(c).name),l(yt,s(c).quantity),l(ft,St),l(gt,xt)},[()=>s(c).price.toLocaleString("en-US",{style:"currency",currency:"USD"}),()=>(s(c).price*s(c).quantity).toLocaleString("en-US",{style:"currency",currency:"USD"})]),m(n,k)}),t(d),t(o),m(r,o)},nt=r=>{var o=Kt();m(r,o)};Ht(ot,r=>{s(i).items.length>0?r(vt):r(nt,!1)})}t(S);var q=a(S,2),x=e(q),j=a(e(x),2),ct=e(j,!0);t(j),t(x);var L=a(x,2),$=e(L),pt=e($);t($);var B=a($,2),dt=e(B,!0);t(B),t(L);var w=a(L,2),K=a(e(w),2),mt=e(K,!0);t(K),t(w);var O=a(w,2),Q=a(e(O),2),bt=e(Q,!0);t(Q),t(O),t(q),Pt(2),t(_);var V=a(_,2),U=e(V),D=e(U);Tt(D);var ut=a(D,2);t(U);var ht=a(U,2);t(V),t(E),J((r,o,d,n)=>{l(rt,v().name),l(M,v().address1),l(lt,v().address2),l(it,`${v().phone??""} | ${v().email??""}`),l(ct,r),l(pt,`Labor (${s(i).hours??""} hours)`),l(dt,o),l(mt,d),l(bt,n)},[()=>s(i).subtotal.toLocaleString("en-US",{style:"currency",currency:"USD"}),()=>s(i).laborCost.toLocaleString("en-US",{style:"currency",currency:"USD"}),()=>s(i).tax.toLocaleString("en-US",{style:"currency",currency:"USD"}),()=>s(i).total.toLocaleString("en-US",{style:"currency",currency:"USD"})]),Et(D,()=>s(p),r=>z(p,r)),G("click",ut,st),G("click",ht,at),m(Y,R),Dt(),et()}export{ae as component};
