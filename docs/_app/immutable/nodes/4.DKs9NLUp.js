import{f as g,a as x,e as u}from"../chunks/NmPVEbss.js";import{i as K}from"../chunks/MCpOFegH.js";import{o as Q,a as Z}from"../chunks/eudfWflr.js";import{aj as ee,at as te,al as se,an as re,ao as ae,am as _,ap as o,aq as r,ak as oe,a as c}from"../chunks/C7s_4A4C.js";import{s as S}from"../chunks/BErm2lkx.js";import{i as ie}from"../chunks/ZSZ7rd2r.js";import{e as ne}from"../chunks/HbtteHjj.js";import{h as le,e as B}from"../chunks/Bn6f7_XN.js";import{a as ue}from"../chunks/0lKmbFWX.js";import{t as ce}from"../chunks/Xx4LWZxO.js";import{a as fe,s as me,b as de}from"../chunks/BnFVzCsZ.js";import{s as ve}from"../chunks/BI5KFv7B.js";import{P as pe}from"../chunks/21VAMSw1.js";const he=!0,ye=he;var we=g('<p class="empty-message svelte-1xl2tfr">You have no saved estimates.</p>'),xe=g('<li class="svelte-1xl2tfr"><div class="history-item-wrapper svelte-1xl2tfr"><a data-sveltekit-reload="" class="history-item-link svelte-1xl2tfr"><div class="estimate-details svelte-1xl2tfr"><span class="estimate-name svelte-1xl2tfr"> </span> <span class="estimate-date svelte-1xl2tfr"> </span></div> <div class="estimate-total svelte-1xl2tfr"> </div></a></div> <button class="delete-button svelte-1xl2tfr" aria-label="Delete estimate"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-trash-2"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg></button></li>'),_e=g('<ul class="history-list svelte-1xl2tfr"></ul>'),ge=g('<!> <div class="container svelte-1xl2tfr"><main><!></main></div>',1);function qe(C,O){ee(O,!1);const E=()=>me(B,"$estimateHistory",R),[R,j]=fe();function A(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}let m=0,d=0,s=null;const f=100;let v=!1;function p(){s&&(s.querySelector(".history-item-wrapper").style.transition="transform 0.3s ease-out",s.style.setProperty("--swipe-offset","0px"),s.style.setProperty("--delete-button-width","0px"),s=null)}function $(e,t){s&&s!==t&&p(),s=t,m=e.touches?e.touches[0].clientX:e.clientX,d=m,v=!1,s.querySelector(".history-item-wrapper").style.transition="none",!e.touches&&ye&&(window.addEventListener("mousemove",h),window.addEventListener("mouseup",y))}function h(e){if(!s)return;e.touches&&e.cancelable&&e.preventDefault(),d=e.touches?e.touches[0].clientX:e.clientX;let t=d-m;t>0&&(t=0),t<-f-20&&(t=-f-20),s.style.setProperty("--swipe-offset",`${t}px`),s.style.setProperty("--delete-button-width",`${Math.min(f,-t)}px`),Math.abs(t)>5&&(v=!0)}function y(e,t){if(!s)return;const n=d-m;s.querySelector(".history-item-wrapper").style.transition="transform 0.3s ease-out",n<-100?D(t):n<-50?(s.style.setProperty("--swipe-offset",`-${f}px`),s.style.setProperty("--delete-button-width",`${f}px`)):p(),window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",y),s&&n>=-100&&(s=null)}function D(e){p(),confirm("Are you sure you want to delete this estimate?")&&de(B,E().filter(t=>t.id!==e))}function H(){s&&(p(),window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",y))}function I(e){v&&(e.preventDefault(),v=!1)}Q(()=>{window.addEventListener("mouseup",H)}),Z(()=>{window.removeEventListener("mouseup",H)}),K();var M=ge();le("1xl2tfr",e=>{re(()=>{ae.title="Estimate History"})});var P=te(M);pe(P,{title:"Estimate History",backHref:"/"});var X=_(P,2),T=o(X),V=o(T);{var W=e=>{var t=we();x(e,t)},G=e=>{var t=_e();ne(t,5,E,n=>n.id,(n,l)=>{var i=xe(),b=o(i),w=o(b),k=o(w),L=o(k),N=o(L,!0);r(L);var U=_(L,2),Y=o(U,!0);r(U),r(k);var q=_(k,2),z=o(q,!0);r(q),r(w),r(b);var F=_(b,2);r(i),oe((a,J)=>{ue(w,"href",`/ElecCalc/history/${c(l).id}`),S(N,c(l).name),S(Y,a),S(z,J)},[()=>A(c(l).date),()=>c(l).total.toLocaleString("en-US",{style:"currency",currency:"USD"})]),u("click",w,I),u("click",F,()=>D(c(l).id)),ce(3,i,()=>ve),u("touchstart",i,a=>$(a,a.currentTarget),void 0,!0),u("touchmove",i,h,void 0,!0),u("touchend",i,a=>y(a,c(l).id),void 0,!0),u("mousedown",i,a=>$(a,a.currentTarget)),x(n,i)}),r(t),x(e,t)};ie(V,e=>{E().length===0?e(W):e(G,!1)})}r(T),r(X),x(C,M),se(),j()}export{qe as component};
