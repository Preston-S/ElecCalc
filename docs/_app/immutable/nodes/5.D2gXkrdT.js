import{f as b,e as G,a as m,s as l}from"../chunks/DYQIaMgs.js";import{i as $t}from"../chunks/CTVf-Cpm.js";import{aa as wt,ak as Ut,ad as Dt,af as J,a as s,ae as kt,al as It,ai as e,ah as a,s as z,V as W,ag as Pt,aj as t,am as Ht}from"../chunks/DOyfLbYF.js";import{i as zt}from"../chunks/CBJRxKJI.js";import{e as Ct}from"../chunks/7ZlRXt7D.js";import{h as Rt,c as Tt,e as X}from"../chunks/BfN4VpFQ.js";import{r as Et}from"../chunks/BeMnpFuH.js";import{b as Ft}from"../chunks/_X_RwZcR.js";import{s as Mt,a as C,b as Nt}from"../chunks/DYW5j25u.js";import{p as qt}from"../chunks/Ccf3Eewp.js";import{P as jt}from"../chunks/Xtv6WyWT.js";import{b as Y}from"../chunks/EOPe5cYO.js";var Bt=b('<tr><td class="svelte-b2338r"> </td><td class="svelte-b2338r"> </td><td class="svelte-b2338r"> </td><td class="svelte-b2338r"> </td></tr>'),Kt=b('<table class="item-table svelte-b2338r"><thead><tr><th class="svelte-b2338r">Item</th><th class="svelte-b2338r">Quantity</th><th class="svelte-b2338r">Price</th><th class="svelte-b2338r">Total</th></tr></thead><tbody></tbody></table>'),Ot=b("<p>No items in this estimate.</p>"),Qt=b('<!> <div class="container svelte-b2338r"><div class="receipt-details svelte-b2338r"><header class="receipt-header svelte-b2338r"><div class="company-logo svelte-b2338r"><svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2L2 7l10 5l10-5l-10-5zm0 11.5L3.5 9L12 4.5L20.5 9L12 13.5z"></path><path fill="currentColor" d="M2 17l10 5l10-5l-10-5l-10 5zm10 3.5L3.5 16L12 11.5L20.5 16L12 20.5z"></path></svg></div> <div class="company-details svelte-b2338r"><h2 class="svelte-b2338r"> </h2> <p class="svelte-b2338r"> <br/> </p> <p class="svelte-b2338r"> </p></div></header> <div class="section svelte-b2338r"><h2 class="svelte-b2338r">Items</h2> <!></div> <div class="summary-section svelte-b2338r"><div class="summary-item svelte-b2338r"><span class="svelte-b2338r">Subtotal</span> <span class="svelte-b2338r"> </span></div> <div class="summary-item svelte-b2338r"><span class="svelte-b2338r"> </span> <span class="svelte-b2338r"> </span></div> <div class="summary-item svelte-b2338r"><span class="svelte-b2338r">Tax</span> <span class="svelte-b2338r"> </span></div> <div class="summary-item total svelte-b2338r"><span class="svelte-b2338r">Total</span> <span class="svelte-b2338r"> </span></div></div> <footer class="receipt-footer svelte-b2338r"><p>Thank you for your business!</p></footer></div> <div class="actions no-print svelte-b2338r"><div class="save-section svelte-b2338r"><input type="text" placeholder="Name this estimate (e.g., Kitchen Reno)" class="svelte-b2338r"/> <button class="save-button svelte-b2338r">Save Estimate</button></div> <button class="print-button svelte-b2338r">Print or Save as PDF</button></div></div>',1);function re(Z,tt){wt(tt,!1);const u=()=>C(qt,"$page",h),et=()=>C(X,"$estimateHistory",h),v=()=>C(Tt,"$companyInfo",h),[h,at]=Mt();let i=W({items:[],subtotal:0,laborCost:0,tax:0,total:0,hours:0}),p=W("");Ut(()=>{u().state&&u().state.items?z(i,u().state):history.state&&history.state.items&&z(i,history.state)});function st(){window.print()}function rt(){if(!s(p).trim()){alert("Please enter a name for the estimate.");return}const r={id:Date.now(),name:s(p),date:new Date().toISOString(),...s(i)};Nt(X,[r,...et()]),window.location.href=`${Y}/history`}$t();var R=Qt();Rt("b2338r",r=>{It(()=>{Pt.title="Final Receipt"})});var T=Dt(R);jt(T,{title:"Final Receipt",get backHref(){return`${Y??""}/`}});var E=a(T,2),_=e(E),f=e(_),F=a(e(f),2),y=e(F),lt=e(y,!0);t(y);var g=a(y,2),M=e(g,!0),it=a(M,2,!0);t(g);var N=a(g,2),ot=e(N);t(N),t(F),t(f);var S=a(f,2),vt=a(e(S),2);{var nt=r=>{var o=Kt(),d=a(e(o));Ct(d,5,()=>s(i).items,n=>n.id,(n,c)=>{var k=Bt(),I=e(k),ft=e(I,!0);t(I);var P=a(I),yt=e(P,!0);t(P);var H=a(P),gt=e(H,!0);t(H);var A=a(H),St=e(A,!0);t(A),t(k),J((xt,Lt)=>{l(ft,s(c).name),l(yt,s(c).quantity),l(gt,xt),l(St,Lt)},[()=>s(c).price.toLocaleString("en-US",{style:"currency",currency:"USD"}),()=>(s(c).price*s(c).quantity).toLocaleString("en-US",{style:"currency",currency:"USD"})]),m(n,k)}),t(d),t(o),m(r,o)},ct=r=>{var o=Ot();m(r,o)};zt(vt,r=>{s(i).items.length>0?r(nt):r(ct,!1)})}t(S);var q=a(S,2),x=e(q),j=a(e(x),2),pt=e(j,!0);t(j),t(x);var L=a(x,2),$=e(L),dt=e($);t($);var B=a($,2),mt=e(B,!0);t(B),t(L);var w=a(L,2),K=a(e(w),2),bt=e(K,!0);t(K),t(w);var O=a(w,2),Q=a(e(O),2),ut=e(Q,!0);t(Q),t(O),t(q),Ht(2),t(_);var V=a(_,2),U=e(V),D=e(U);Et(D);var ht=a(D,2);t(U);var _t=a(U,2);t(V),t(E),J((r,o,d,n)=>{l(lt,v().name),l(M,v().address1),l(it,v().address2),l(ot,`${v().phone??""} | ${v().email??""}`),l(pt,r),l(dt,`Labor (${s(i).hours??""} hours)`),l(mt,o),l(bt,d),l(ut,n)},[()=>s(i).subtotal.toLocaleString("en-US",{style:"currency",currency:"USD"}),()=>s(i).laborCost.toLocaleString("en-US",{style:"currency",currency:"USD"}),()=>s(i).tax.toLocaleString("en-US",{style:"currency",currency:"USD"}),()=>s(i).total.toLocaleString("en-US",{style:"currency",currency:"USD"})]),Ft(D,()=>s(p),r=>z(p,r)),G("click",ht,rt),G("click",_t,st),m(Z,R),kt(),at()}export{re as component};
