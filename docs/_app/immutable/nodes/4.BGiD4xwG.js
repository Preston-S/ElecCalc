import{f as x,a as y,e as d}from"../chunks/NmPVEbss.js";import{i as F}from"../chunks/MCpOFegH.js";import{o as J,a as K}from"../chunks/eudfWflr.js";import{aj as Q,at as Z,al as tt,an as et,ao as st,am as w,ap as a,aq as r,ak as rt,a as l}from"../chunks/C7s_4A4C.js";import{s as $}from"../chunks/BErm2lkx.js";import{i as ot}from"../chunks/ZSZ7rd2r.js";import{e as at}from"../chunks/HbtteHjj.js";import{h as it,e as U}from"../chunks/Bn6f7_XN.js";import{a as nt}from"../chunks/0lKmbFWX.js";import{t as lt}from"../chunks/Xx4LWZxO.js";import{a as ut,s as mt,b as dt}from"../chunks/BnFVzCsZ.js";import{s as vt}from"../chunks/BI5KFv7B.js";import{P as ct}from"../chunks/B1w9WJdy.js";const pt=!0,ft=pt;var ht=x('<p class="empty-message svelte-1xl2tfr">You have no saved estimates.</p>'),yt=x('<li class="svelte-1xl2tfr"><div class="history-item-wrapper svelte-1xl2tfr"><a data-sveltekit-reload="" class="history-item-link svelte-1xl2tfr"><div class="estimate-details svelte-1xl2tfr"><span class="estimate-name svelte-1xl2tfr"> </span> <span class="estimate-date svelte-1xl2tfr"> </span></div> <div class="estimate-total svelte-1xl2tfr"> </div></a></div> <button class="delete-button svelte-1xl2tfr" aria-label="Delete estimate"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-trash-2"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg></button></li>'),wt=x('<ul class="history-list svelte-1xl2tfr"></ul>'),xt=x('<!> <div class="container svelte-1xl2tfr"><main><!></main></div>',1);function Tt(q,B){Q(B,!1);const _=()=>mt(U,"$estimateHistory",O),[O,R]=ut();function j(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}let v=0,c=0,e=null;const u=100;function p(){e&&(e.querySelector(".history-item-wrapper").style.transition="transform 0.3s ease-out",e.style.setProperty("--swipe-offset","0px"),e.style.setProperty("--delete-button-width","0px"),e=null)}function L(t,s){e&&e!==s&&p(),e=s,v=t.touches?t.touches[0].clientX:t.clientX,c=v,e.querySelector(".history-item-wrapper").style.transition="none",!t.touches&&ft&&(window.addEventListener("mousemove",f),window.addEventListener("mouseup",h))}function f(t){if(!e)return;c=t.touches?t.touches[0].clientX:t.clientX;let s=c-v;s>0&&(s=0),s<-u-20&&(s=-u-20),e.style.setProperty("--swipe-offset",`${s}px`),e.style.setProperty("--delete-button-width",`${Math.min(u,-s)}px`)}function h(t,s){if(!e)return;const m=c-v;e.querySelector(".history-item-wrapper").style.transition="transform 0.3s ease-out",m<-50?(e.style.setProperty("--swipe-offset",`-${u}px`),e.style.setProperty("--delete-button-width",`${u}px`)):p(),window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",h),e=null}function A(t){p(),confirm("Are you sure you want to delete this estimate?")&&dt(U,_().filter(s=>s.id!==t))}function k(){e&&(p(),window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",h))}J(()=>{window.addEventListener("mouseup",k)}),K(()=>{window.removeEventListener("mouseup",k)}),F();var H=xt();it("1xl2tfr",t=>{et(()=>{st.title="Estimate History"})});var D=Z(H);ct(D,{title:"Estimate History",backHref:"/"});var P=w(D,2),X=a(P),C=a(X);{var I=t=>{var s=ht();y(t,s)},V=t=>{var s=wt();at(s,5,_,m=>m.id,(m,n)=>{var i=yt(),g=a(i),E=a(g),b=a(E),S=a(b),W=a(S,!0);r(S);var M=w(S,2),G=a(M,!0);r(M),r(b);var T=w(b,2),N=a(T,!0);r(T),r(E),r(g);var Y=w(g,2);r(i),rt((o,z)=>{nt(E,"href",`/ElecCalc/history/${l(n).id}`),$(W,l(n).name),$(G,o),$(N,z)},[()=>j(l(n).date),()=>l(n).total.toLocaleString("en-US",{style:"currency",currency:"USD"})]),d("click",Y,()=>A(l(n).id)),lt(3,i,()=>vt),d("touchstart",i,o=>L(o,o.currentTarget),void 0,!0),d("touchmove",i,f,void 0,!0),d("touchend",i,o=>h(o,l(n).id),void 0,!0),d("mousedown",i,o=>L(o,o.currentTarget)),y(m,i)}),r(s),y(t,s)};ot(C,t=>{_().length===0?t(I):t(V,!1)})}r(X),r(P),y(q,H),tt(),R()}export{Tt as component};
