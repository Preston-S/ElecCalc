import{f as I,e as N,a as S}from"../chunks/CDZZ00qL.js";import{i as j}from"../chunks/BuwtjDum.js";import{T as $e,aa as le,a3 as he,D as we,aU as ge,aV as Se,x as Y,W as xe,a6 as B,aW as oe,z as E,a7 as M,m as e,a8 as G,ac as s,a9 as v,a4 as R,aX as Ie,ad as a,b as g,aY as ke,ae as Ue,af as qe,ag as Re,aw as re,ab as Le}from"../chunks/BI79krja.js";import{s as x}from"../chunks/fG78sGWb.js";import{m as De,h as Ce,l as Ee,t as He}from"../chunks/nyx9Xw70.js";import{r as ve}from"../chunks/BiOTNO3a.js";import{b as ue}from"../chunks/BIRmhu5c.js";import{s as L,a as J,c as Ae,b as O}from"../chunks/BkARbO7P.js";import{g as Te}from"../chunks/BtealIsu.js";import{i as ce}from"../chunks/B1b7_lMJ.js";import{e as de}from"../chunks/CbhNiVZy.js";import{t as ie,a as We}from"../chunks/zuxcmlgg.js";import{f as Fe}from"../chunks/BviiYr3T.js";import{f as ne}from"../chunks/BI5KFv7B.js";function me(t,u,r=!1){if(t.multiple){if(u==null)return;if(!we(u))return ge();for(var i of t.options)i.selected=u.includes(T(i));return}for(i of t.options){var b=T(i);if(Se(b,u)){i.selected=!0;return}}(!r||u!==void 0)&&(t.selectedIndex=-1)}function Ne(t){var u=new MutationObserver(()=>{me(t,t.__value)});u.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),he(()=>{u.disconnect()})}function Me(t,u,r=u){var i=new WeakSet,b=!0;$e(t,"change",d=>{var c=d?"[selected]":":checked",l;if(t.multiple)l=[].map.call(t.querySelectorAll(c),T);else{var z=t.querySelector(c)??t.querySelector("option:not([disabled])");l=z&&T(z)}r(l),Y!==null&&i.add(Y)}),le(()=>{var d=u();if(t===document.activeElement){var c=xe??Y;if(i.has(c))return}if(me(t,d,b),b&&d===void 0){var l=t.querySelector(":checked");l!==null&&(d=T(l),r(d))}t.__value=d,b=!1}),Ne(t)}function T(t){return"__value"in t?t.__value:t.value}var Oe=I("<option disabled selected>Add materials in settings</option>"),Pe=I("<option> </option>"),Ve=I('<div class="item-selector svelte-1ss7k5a"><select class="svelte-1ss7k5a"><!><!></select> <input type="number" min="1" class="svelte-1ss7k5a"/> <button class="svelte-1ss7k5a">Add</button></div>');function Xe(t,u){B(u,!1);const r=()=>L(De,"$materials",b),i=()=>L(c,"$estimateItems",b),[b,d]=J(),c=oe("estimateItems");let l=E(r().length>0?r()[0].id:null),z=E(1);function D(){if(!e(l)){alert("Please select an item.");return}const n=r().find(_=>_.id===e(l));if(!n)return;const p=i().findIndex(_=>_.id===e(l));p>-1?(Ae(c,g(i)[p].quantity+=e(z),g(i)),O(c,[...i()])):O(c,[...i(),{...n,quantity:e(z)}]),R(z,1)}j();var m=Ve(),o=s(m);M(()=>{e(l),Ie(()=>{r()})});var f=s(o);{var $=n=>{var p=Oe();S(n,p)};ce(f,n=>{r().length===0&&n($)})}var h=v(f);de(h,1,r,n=>n.id,(n,p)=>{var _=Pe(),k=s(_,!0);a(_);var U={};M(()=>{x(k,e(p).name),U!==(U=e(p).id)&&(_.value=(_.__value=e(p).id)??"")}),S(n,_)}),a(o);var y=v(o,2);ve(y);var w=v(y,2);a(m),Me(o,()=>e(l),n=>R(l,n)),ue(y,()=>e(z),n=>R(z,n)),N("click",w,D),S(t,m),G(),d()}var Ye=I('<p class="empty-message svelte-302u75">No items added yet.</p>'),je=I('<li class="svelte-302u75"><div class="item-details"><span class="item-name svelte-302u75"> </span> <span class="item-qty svelte-302u75"> </span></div> <div class="item-actions svelte-302u75"><span class="item-total svelte-302u75"> </span> <button class="remove-btn svelte-302u75">&times;</button></div></li>'),Be=I('<ul class="item-list svelte-302u75"></ul>'),Ge=I('<div class="item-list-container svelte-302u75"><!></div>');function Je(t,u){B(u,!1);const r=()=>L(d,"$estimateItems",i),[i,b]=J(),d=oe("estimateItems");function c(o){O(d,r().filter(f=>f.id!==o))}j();var l=Ge(),z=s(l);{var D=o=>{var f=Ye();S(o,f)},m=o=>{var f=Be();de(f,13,r,$=>$.id,($,h)=>{var y=je(),w=s(y),n=s(w),p=s(n,!0);a(n);var _=v(n,2),k=s(_);a(_),a(w);var U=v(w,2),q=s(U),P=s(q,!0);a(q);var H=v(q,2);a(U),a(y),M((A,W)=>{x(p,e(h).name),x(k,`${e(h).quantity??""} Ã— ${A??""}`),x(P,W)},[()=>e(h).price.toLocaleString("en-US",{style:"currency",currency:"USD"}),()=>(e(h).quantity*e(h).price).toLocaleString("en-US",{style:"currency",currency:"USD"})]),N("click",H,()=>c(e(h).id)),ie(1,y,()=>ne),ie(2,y,()=>ne),We(y,()=>Fe,()=>({duration:300})),S($,y)}),a(f),S(o,f)};ce(z,o=>{r().length===0?o(D):o(m,!1)})}a(l),S(t,l),G(),b()}var Ke=I('<div class="container svelte-z2duwz"><header class="svelte-z2duwz"><h1 class="svelte-z2duwz">New Estimate</h1></header> <main><div class="section svelte-z2duwz"><label for="hours" class="svelte-z2duwz">Estimated Labor Hours</label> <input id="hours" type="number" step="0.5" class="svelte-z2duwz"/></div> <hr class="svelte-z2duwz"/> <div class="section svelte-z2duwz"><!></div> <div class="item-list-section svelte-z2duwz"><!></div> <div class="summary-section svelte-z2duwz"><h2 class="svelte-z2duwz">Running Total</h2> <div class="summary-item svelte-z2duwz"><span>Subtotal</span> <span> </span></div> <div class="summary-item total svelte-z2duwz"><span>Total (incl. labor & tax)</span> <span> </span></div></div> <div class="button-container svelte-z2duwz"><button class="cta-button desktop-cta svelte-z2duwz">Review Final Receipt</button></div></main></div> <div class="mobile-summary svelte-z2duwz"><div class="mobile-totals svelte-z2duwz"><div class="mobile-sub svelte-z2duwz"> </div> <div class="mobile-total svelte-z2duwz"> </div></div> <button class="cta-button mobile-cta svelte-z2duwz">Review</button></div>',1);function dt(t,u){B(u,!1);const r=()=>L(z,"$estimateItems",c),i=()=>L(D,"$estimatedHours",c),b=()=>L(Ee,"$laborRate",c),d=()=>L(He,"$taxRate",c),[c,l]=J(),z=re([]),D=re(0);ke("estimateItems",z);let m=E(0),o=E(0),f=E(0),$=E(0);function h(){Te("receipt",{state:{items:r(),subtotal:e(m),laborCost:e(o),tax:e(f),total:e($),hours:i()}})}Ue(()=>(e(m),r(),e(o),i(),b(),e(f),d()),()=>{R(m,r().reduce((C,F)=>C+F.price*F.quantity,0)),R(o,i()*b()),R(f,(e(m)+e(o))*d()),R($,e(m)+e(o)+e(f))}),qe(),j();var y=Ke();Ce("z2duwz",C=>{le(()=>{Le.title="Create Estimate"})});var w=Re(y),n=v(s(w),2),p=s(n),_=v(s(p),2);ve(_),a(p);var k=v(p,4),U=s(k);Xe(U,{}),a(k);var q=v(k,2),P=s(q);Je(P,{}),a(q);var H=v(q,2),A=v(s(H),2),W=v(s(A),2),fe=s(W,!0);a(W),a(A);var K=v(A,2),Q=v(s(K),2),_e=s(Q,!0);a(Q),a(K),a(H);var Z=v(H,2),ee=s(Z);a(Z),a(n),a(w);var te=v(w,2),V=s(te),X=s(V),pe=s(X,!0);a(X);var ae=v(X,2),be=s(ae,!0);a(ae),a(V);var se=v(V,2);a(te),M((C,F,ze,ye)=>{x(fe,C),x(_e,F),ee.disabled=(r(),g(()=>r().length===0)),x(pe,ze),x(be,ye),se.disabled=(r(),g(()=>r().length===0))},[()=>(e(m),g(()=>e(m).toLocaleString("en-US",{style:"currency",currency:"USD"}))),()=>(e($),g(()=>e($).toLocaleString("en-US",{style:"currency",currency:"USD"}))),()=>(e(m),g(()=>e(m).toLocaleString("en-US",{style:"currency",currency:"USD"}))),()=>(e($),g(()=>e($).toLocaleString("en-US",{style:"currency",currency:"USD"})))]),ue(_,i,C=>O(D,C)),N("click",ee,h),N("click",se,h),S(t,y),G(),l()}export{dt as component};
