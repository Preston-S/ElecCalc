import{f as g,a as x,s as L,e as u}from"../chunks/DYQIaMgs.js";import{i as Q}from"../chunks/CTVf-Cpm.js";import{aa as Z,ak as ee,aJ as te,ad as se,ae as re,al as ae,ag as ie,ah as _,ai as i,aj as r,af as oe,a as c}from"../chunks/DOyfLbYF.js";import{i as ne}from"../chunks/CBJRxKJI.js";import{e as le}from"../chunks/7ZlRXt7D.js";import{h as ue,e as q}from"../chunks/BfN4VpFQ.js";import{a as ce}from"../chunks/BeMnpFuH.js";import{t as fe}from"../chunks/Cf-Q6Mza.js";import{s as de,a as ve,b as me}from"../chunks/DYW5j25u.js";import{s as pe}from"../chunks/BI5KFv7B.js";import{P as he}from"../chunks/BCjTiHZq.js";import{b as C}from"../chunks/DW30XHLL.js";const ye=!0,we=ye;var xe=g('<p class="empty-message svelte-1xl2tfr">You have no saved estimates.</p>'),_e=g('<li class="svelte-1xl2tfr"><div class="history-item-wrapper svelte-1xl2tfr"><a data-sveltekit-reload="" class="history-item-link svelte-1xl2tfr"><div class="estimate-details svelte-1xl2tfr"><span class="estimate-name svelte-1xl2tfr"> </span> <span class="estimate-date svelte-1xl2tfr"> </span></div> <div class="estimate-total svelte-1xl2tfr"> </div></a></div> <button class="delete-button svelte-1xl2tfr" aria-label="Delete estimate"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-trash-2"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg></button></li>'),ge=g('<ul class="history-list svelte-1xl2tfr"></ul>'),be=g('<!> <div class="container svelte-1xl2tfr"><main><!></main></div>',1);function Be(O,R){Z(R,!1);const b=()=>ve(q,"$estimateHistory",j),[j,A]=de();function I(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}let d=0,v=0,s=null;const f=100;let m=!1;function p(){s&&(s.querySelector(".history-item-wrapper").style.transition="transform 0.3s ease-out",s.style.setProperty("--swipe-offset","0px"),s.style.setProperty("--delete-button-width","0px"),s=null)}function S(e,t){s&&s!==t&&p(),s=t,d=e.touches?e.touches[0].clientX:e.clientX,v=d,m=!1,s.querySelector(".history-item-wrapper").style.transition="none",!e.touches&&we&&(window.addEventListener("mousemove",h),window.addEventListener("mouseup",y))}function h(e){if(!s)return;e.touches&&e.cancelable&&e.preventDefault(),v=e.touches?e.touches[0].clientX:e.clientX;let t=v-d;t>0&&(t=0),t<-f-20&&(t=-f-20),s.style.setProperty("--swipe-offset",`${t}px`),s.style.setProperty("--delete-button-width",`${Math.min(f,-t)}px`),Math.abs(t)>5&&(m=!0)}function y(e,t){if(!s)return;const n=v-d;s.querySelector(".history-item-wrapper").style.transition="transform 0.3s ease-out",n<-100?D(t):n<-50?(s.style.setProperty("--swipe-offset",`-${f}px`),s.style.setProperty("--delete-button-width",`${f}px`)):p(),window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",y),s&&n>=-100&&(s=null)}function D(e){p(),confirm("Are you sure you want to delete this estimate?")&&me(q,b().filter(t=>t.id!==e))}function H(){s&&(p(),window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",y))}function V(e){m&&(e.preventDefault(),m=!1)}ee(()=>{window.addEventListener("mouseup",H)}),te(()=>{window.removeEventListener("mouseup",H)}),Q();var M=be();ue("1xl2tfr",e=>{ae(()=>{ie.title="Estimate History"})});var P=se(M);he(P,{title:"Estimate History",get backHref(){return`${C??""}/`}});var X=_(P,2),T=i(X),W=i(T);{var G=e=>{var t=xe();x(e,t)},J=e=>{var t=ge();le(t,5,b,n=>n.id,(n,l)=>{var o=_e(),E=i(o),w=i(E),k=i(w),$=i(k),N=i($,!0);r($);var U=_($,2),Y=i(U,!0);r(U),r(k);var B=_(k,2),z=i(B,!0);r(B),r(w),r(E);var F=_(E,2);r(o),oe((a,K)=>{ce(w,"href",`${C}/history/${c(l).id}`),L(N,c(l).name),L(Y,a),L(z,K)},[()=>I(c(l).date),()=>c(l).total.toLocaleString("en-US",{style:"currency",currency:"USD"})]),u("click",w,V),u("click",F,()=>D(c(l).id)),fe(3,o,()=>pe),u("touchstart",o,a=>S(a,a.currentTarget),void 0,!0),u("touchmove",o,h,void 0,!0),u("touchend",o,a=>y(a,c(l).id),void 0,!0),u("mousedown",o,a=>S(a,a.currentTarget)),x(n,o)}),r(t),x(e,t)};ne(W,e=>{b().length===0?e(G):e(J,!1)})}r(T),r(X),x(O,M),re(),A()}export{Be as component};
