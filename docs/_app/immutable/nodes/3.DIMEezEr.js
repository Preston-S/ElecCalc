import{f as g,a as x,s as L,e as u}from"../chunks/DYQIaMgs.js";import{i as K}from"../chunks/CTVf-Cpm.js";import{aa as Q,ak as Z,aJ as ee,ad as te,ae as se,al as re,ag as ae,ah as _,ai as i,aj as r,af as ie,a as c}from"../chunks/DOyfLbYF.js";import{i as oe}from"../chunks/CBJRxKJI.js";import{e as ne}from"../chunks/7ZlRXt7D.js";import{h as le,e as q}from"../chunks/BfN4VpFQ.js";import{a as ue}from"../chunks/BeMnpFuH.js";import{t as ce}from"../chunks/Cf-Q6Mza.js";import{s as fe,a as de,b as ve}from"../chunks/DYW5j25u.js";import{s as me}from"../chunks/BI5KFv7B.js";import{P as pe}from"../chunks/W36m849A.js";import{b as he}from"../chunks/B3aF6rSb.js";const ye=!0,we=ye;var xe=g('<p class="empty-message svelte-1xl2tfr">You have no saved estimates.</p>'),_e=g('<li class="svelte-1xl2tfr"><div class="history-item-wrapper svelte-1xl2tfr"><a data-sveltekit-reload="" class="history-item-link svelte-1xl2tfr"><div class="estimate-details svelte-1xl2tfr"><span class="estimate-name svelte-1xl2tfr"> </span> <span class="estimate-date svelte-1xl2tfr"> </span></div> <div class="estimate-total svelte-1xl2tfr"> </div></a></div> <button class="delete-button svelte-1xl2tfr" aria-label="Delete estimate"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-trash-2"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg></button></li>'),ge=g('<ul class="history-list svelte-1xl2tfr"></ul>'),be=g('<!> <div class="container svelte-1xl2tfr"><main><!></main></div>',1);function Be(C,O){Q(O,!1);const b=()=>de(q,"$estimateHistory",R),[R,j]=fe();function A(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}let d=0,v=0,s=null;const f=100;let m=!1;function p(){s&&(s.querySelector(".history-item-wrapper").style.transition="transform 0.3s ease-out",s.style.setProperty("--swipe-offset","0px"),s.style.setProperty("--delete-button-width","0px"),s=null)}function S(e,t){s&&s!==t&&p(),s=t,d=e.touches?e.touches[0].clientX:e.clientX,v=d,m=!1,s.querySelector(".history-item-wrapper").style.transition="none",!e.touches&&we&&(window.addEventListener("mousemove",h),window.addEventListener("mouseup",y))}function h(e){if(!s)return;e.touches&&e.cancelable&&e.preventDefault(),v=e.touches?e.touches[0].clientX:e.clientX;let t=v-d;t>0&&(t=0),t<-f-20&&(t=-f-20),s.style.setProperty("--swipe-offset",`${t}px`),s.style.setProperty("--delete-button-width",`${Math.min(f,-t)}px`),Math.abs(t)>5&&(m=!0)}function y(e,t){if(!s)return;const n=v-d;s.querySelector(".history-item-wrapper").style.transition="transform 0.3s ease-out",n<-100?D(t):n<-50?(s.style.setProperty("--swipe-offset",`-${f}px`),s.style.setProperty("--delete-button-width",`${f}px`)):p(),window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",y),s&&n>=-100&&(s=null)}function D(e){p(),confirm("Are you sure you want to delete this estimate?")&&ve(q,b().filter(t=>t.id!==e))}function H(){s&&(p(),window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",y))}function I(e){m&&(e.preventDefault(),m=!1)}Z(()=>{window.addEventListener("mouseup",H)}),ee(()=>{window.removeEventListener("mouseup",H)}),K();var M=be();le("1xl2tfr",e=>{re(()=>{ae.title="Estimate History"})});var P=te(M);pe(P,{title:"Estimate History",get backHref(){return`${he??""}/`}});var X=_(P,2),T=i(X),V=i(T);{var W=e=>{var t=xe();x(e,t)},G=e=>{var t=ge();ne(t,5,b,n=>n.id,(n,l)=>{var o=_e(),E=i(o),w=i(E),k=i(w),$=i(k),J=i($,!0);r($);var U=_($,2),N=i(U,!0);r(U),r(k);var B=_(k,2),Y=i(B,!0);r(B),r(w),r(E);var z=_(E,2);r(o),ie((a,F)=>{ue(w,"href",`{base}/history/${c(l).id}`),L(J,c(l).name),L(N,a),L(Y,F)},[()=>A(c(l).date),()=>c(l).total.toLocaleString("en-US",{style:"currency",currency:"USD"})]),u("click",w,I),u("click",z,()=>D(c(l).id)),ce(3,o,()=>me),u("touchstart",o,a=>S(a,a.currentTarget),void 0,!0),u("touchmove",o,h,void 0,!0),u("touchend",o,a=>y(a,c(l).id),void 0,!0),u("mousedown",o,a=>S(a,a.currentTarget)),x(n,o)}),r(t),x(e,t)};oe(V,e=>{b().length===0?e(W):e(G,!1)})}r(T),r(X),x(C,M),se(),j()}export{Be as component};
