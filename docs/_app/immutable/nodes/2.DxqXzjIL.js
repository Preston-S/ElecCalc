import{f as k,s as L,a as x,e as O}from"../chunks/Crqtyrhl.js";import{i as Q}from"../chunks/CXhA1Kpn.js";import{m as Se,o as J,al as ce,q as Ie,Y as xe,aK as ke,aL as qe,ar as Re,aa as X,aM as de,V as A,ai as s,af as T,a as e,aN as Ue,ah as v,aj as a,s as D,ae as Z,u as U,aO as Le,ab as we,ac as De,ad as Ce,aI as oe,ag as Ee}from"../chunks/_tk8g6n2.js";import{i as ee}from"../chunks/CgKErwGf.js";import{m as He,h as Ae,l as Ne,t as Te}from"../chunks/DSTXjmi1.js";import{r as me}from"../chunks/D2OtXZAi.js";import{b as pe}from"../chunks/DDs-nSUI.js";import{a as C,s as te,d as Fe,b as Y}from"../chunks/D5qhZAsH.js";import{g as Me}from"../chunks/DqkzCTna.js";import{e as _e}from"../chunks/CPYbfN0Y.js";import{t as ve,a as Oe}from"../chunks/Dls7-Jcx.js";import{f as Ye}from"../chunks/BviiYr3T.js";import{f as ue}from"../chunks/BI5KFv7B.js";function fe(t,u,r=!1){if(t.multiple){if(u==null)return;if(!xe(u))return ke();for(var i of t.options)i.selected=u.includes(N(i));return}for(i of t.options){var d=N(i);if(qe(d,u)){i.selected=!0;return}}(!r||u!==void 0)&&(t.selectedIndex=-1)}function je(t){var u=new MutationObserver(()=>{fe(t,t.__value)});u.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Re(()=>{u.disconnect()})}function Be(t,u,r=u){var i=new WeakSet,d=!0;Se(t,"change",m=>{var c=m?"[selected]":":checked",l;if(t.multiple)l=[].map.call(t.querySelectorAll(c),N);else{var b=t.querySelector(c)??t.querySelector("option:not([disabled])");l=b&&N(b)}r(l),J!==null&&i.add(J)}),ce(()=>{var m=u();if(t===document.activeElement){var c=Ie??J;if(i.has(c))return}if(fe(t,m,d),d&&m===void 0){var l=t.querySelector(":checked");l!==null&&(m=N(l),r(m))}t.__value=m,d=!1}),je(t)}function N(t){return"__value"in t?t.__value:t.value}var Ge=k("<option disabled selected>Add materials in settings</option>"),Ke=k("<option> </option>"),Pe=k('<div class="item-selector svelte-1ss7k5a"><select class="svelte-1ss7k5a"><!><!></select> <input type="number" min="1" class="svelte-1ss7k5a"/> <button class="svelte-1ss7k5a">Add</button></div>');function Ve(t,u){X(u,!1);const r=()=>C(He,"$materials",d),i=()=>C(c,"$estimateItems",d),[d,m]=te(),c=de("estimateItems");let l=A(r().length>0?r()[0].id:null),b=A(1);function E(){if(!e(l)){alert("Please select an item.");return}const n=r().find(f=>f.id===e(l));if(!n)return;const y=i().findIndex(f=>f.id===e(l));y>-1?(Fe(c,U(i)[y].quantity+=e(b),U(i)),Y(c,[...i()])):Y(c,[...i(),{...n,quantity:e(b)}]),D(b,1)}Q();var p=Pe(),o=s(p);T(()=>{e(l),Ue(()=>{r()})});var _=s(o);{var g=n=>{var y=Ge();x(n,y)};ee(_,n=>{r().length===0&&n(g)})}var $=v(_);_e($,1,r,n=>n.id,(n,y)=>{var f=Ke(),H=s(f,!0);a(f);var R={};T(()=>{L(H,e(y).name),R!==(R=e(y).id)&&(f.value=(f.__value=e(y).id)??"")}),x(n,f)}),a(o);var h=v(o,2);me(h);var q=v(h,2);a(p),Be(o,()=>e(l),n=>D(l,n)),pe(h,()=>e(b),n=>D(b,n)),O("click",q,E),x(t,p),Z(),m()}var We=k('<p class="empty-message svelte-302u75">No items added yet.</p>'),ze=k('<li class="svelte-302u75"><div class="item-details"><span class="item-name svelte-302u75"> </span> <span class="item-qty svelte-302u75"> </span></div> <div class="item-actions svelte-302u75"><span class="item-total svelte-302u75"> </span> <button class="remove-btn svelte-302u75">&times;</button></div></li>'),Je=k('<ul class="item-list svelte-302u75"></ul>'),Qe=k('<div class="item-list-container svelte-302u75"><!></div>');function Xe(t,u){X(u,!1);const r=()=>C(m,"$estimateItems",i),[i,d]=te(),m=de("estimateItems");function c(o){Y(m,r().filter(_=>_.id!==o))}Q();var l=Qe(),b=s(l);{var E=o=>{var _=We();x(o,_)},p=o=>{var _=Je();_e(_,13,r,g=>g.id,(g,$)=>{var h=ze(),q=s(h),n=s(q),y=s(n,!0);a(n);var f=v(n,2),H=s(f);a(f),a(q);var R=v(q,2),w=s(R),j=s(w,!0);a(w);var F=v(w,2);a(R),a(h),T((B,M)=>{L(y,e($).name),L(H,`${e($).quantity??""} Ã— ${B??""}`),L(j,M)},[()=>e($).price.toLocaleString("en-US",{style:"currency",currency:"USD"}),()=>(e($).quantity*e($).price).toLocaleString("en-US",{style:"currency",currency:"USD"})]),O("click",F,()=>c(e($).id)),ve(1,h,()=>ue),ve(2,h,()=>ue),Oe(h,()=>Ye,()=>({duration:300})),x(g,h)}),a(_),x(o,_)};ee(b,o=>{r().length===0?o(E):o(p,!1)})}a(l),x(t,l),Z(),d()}var Ze=k('<div class="prompt-container svelte-1uha8ag"><h1 class="svelte-1uha8ag">Set Your Labor Rate</h1> <p class="svelte-1uha8ag">Before you can create an estimate, you need to set your hourly labor rate.</p> <a href="/settings" class="cta-button svelte-1uha8ag">Go to Settings</a></div>'),et=k('<main class="svelte-1uha8ag"><div class="section input-section svelte-1uha8ag"><label for="hours" class="svelte-1uha8ag">Estimated Labor Hours</label> <input id="hours" type="number" step="0.5" placeholder="0" class="svelte-1uha8ag"/></div> <hr class="svelte-1uha8ag"/> <div class="section svelte-1uha8ag"><!></div> <div class="item-list-section svelte-1uha8ag"><!></div> <div class="summary-section svelte-1uha8ag"><h2 class="svelte-1uha8ag">Running Total</h2> <div class="summary-item svelte-1uha8ag"><span>Subtotal</span> <span> </span></div> <div class="summary-item total svelte-1uha8ag"><span>Total (incl. labor & tax)</span> <span> </span></div></div> <div class="button-container svelte-1uha8ag"><button class="cta-button desktop-cta svelte-1uha8ag">Review Final Receipt</button></div></main>'),tt=k('<div class="container svelte-1uha8ag"><!></div> <div class="mobile-summary svelte-1uha8ag"><div class="mobile-totals svelte-1uha8ag"><div class="mobile-sub svelte-1uha8ag"> </div> <div class="mobile-total svelte-1uha8ag"> </div></div> <button class="cta-button mobile-cta svelte-1uha8ag">Review</button></div>',1);function _t(t,u){X(u,!1);const r=()=>C(b,"$estimateItems",c),i=()=>C(E,"$estimatedHours",c),d=()=>C(Ne,"$laborRate",c),m=()=>C(Te,"$taxRate",c),[c,l]=te(),b=oe([]),E=oe(0);Le("estimateItems",b);let p=A(0),o=A(0),_=A(0),g=A(0);function $(){Me("receipt",{state:{items:r(),subtotal:e(p),laborCost:e(o),tax:e(_),total:e(g),hours:i()}})}we(()=>(e(p),r(),e(o),i(),d(),e(_),m()),()=>{D(p,r().reduce((S,I)=>S+I.price*I.quantity,0)),D(o,i()*d()),D(_,(e(p)+e(o))*m()),D(g,e(p)+e(o)+e(_))}),De(),Q();var h=tt();Ae("1uha8ag",S=>{ce(()=>{Ee.title="New Estimate - Electrical Calculator"})});var q=Ce(h),n=s(q);{var y=S=>{var I=Ze();x(S,I)},f=S=>{var I=et(),G=s(I),ae=v(s(G),2);me(ae),a(G);var K=v(G,4),be=s(K);Ve(be,{}),a(K);var P=v(K,2),he=s(P);Xe(he,{}),a(P);var V=v(P,2),W=v(s(V),2),se=v(s(W),2),ge=s(se,!0);a(se),a(W);var re=v(W,2),ie=v(s(re),2),ye=s(ie,!0);a(ie),a(re),a(V);var ne=v(V,2),le=s(ne);a(ne),a(I),T((z,$e)=>{L(ge,z),L(ye,$e),le.disabled=(r(),U(()=>r().length===0))},[()=>(e(p),U(()=>e(p).toLocaleString("en-US",{style:"currency",currency:"USD"}))),()=>(e(g),U(()=>e(g).toLocaleString("en-US",{style:"currency",currency:"USD"})))]),pe(ae,i,z=>Y(E,z)),O("click",le,$),x(S,I)};ee(n,S=>{!d()||d()===0?S(y):S(f,!1)})}a(q);var H=v(q,2),R=s(H),w=s(R),j=s(w);a(w);var F=v(w,2),B=s(F);a(F),a(R);var M=v(R,2);a(H),T((S,I)=>{L(j,`Subtotal: ${S??""}`),L(B,`Total: ${I??""}`),M.disabled=(r(),U(()=>r().length===0))},[()=>(e(p),U(()=>e(p).toLocaleString("en-US",{style:"currency",currency:"USD"}))),()=>(e(g),U(()=>e(g).toLocaleString("en-US",{style:"currency",currency:"USD"})))]),O("click",M,$),x(t,h),Z(),l()}export{_t as component};
