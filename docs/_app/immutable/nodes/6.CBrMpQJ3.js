import{f as m,e as I,a as p}from"../chunks/NmPVEbss.js";import{i as nt}from"../chunks/MCpOFegH.js";import{o as lt}from"../chunks/eudfWflr.js";import{aj as vt,at as ct,ak as T,a as s,al as pt,an as mt,ap as e,$ as j,s as U,am as a,ao as ut,aq as t}from"../chunks/C7s_4A4C.js";import{s as n}from"../chunks/BErm2lkx.js";import{i as bt}from"../chunks/ZSZ7rd2r.js";import{e as dt}from"../chunks/HbtteHjj.js";import{h as _t,e as K}from"../chunks/Bn6f7_XN.js";import{r as ft}from"../chunks/0lKmbFWX.js";import{b as yt}from"../chunks/BuigJWDy.js";import{a as ht,s as M,b as St}from"../chunks/BnFVzCsZ.js";import{p as gt}from"../chunks/CRli9jJ6.js";import{P as xt}from"../chunks/edDLbt3M.js";var $t=m('<li class="svelte-b2338r"><span> </span> <span> </span></li>'),Ut=m('<ul class="item-list svelte-b2338r"></ul>'),Dt=m("<p>No items in this estimate.</p>"),wt=m('<!> <div class="container svelte-b2338r"><div class="receipt-details svelte-b2338r"><div class="section svelte-b2338r"><h2 class="svelte-b2338r">Items</h2> <!></div> <hr class="svelte-b2338r"/> <div class="section svelte-b2338r"><h2 class="svelte-b2338r">Summary</h2> <div class="summary-item svelte-b2338r"><span class="svelte-b2338r">Subtotal</span> <span class="svelte-b2338r"> </span></div> <div class="summary-item svelte-b2338r"><span class="svelte-b2338r"> </span> <span class="svelte-b2338r"> </span></div> <div class="summary-item svelte-b2338r"><span class="svelte-b2338r">Tax</span> <span class="svelte-b2338r"> </span></div> <div class="summary-item total svelte-b2338r"><span class="svelte-b2338r">Total</span> <span class="svelte-b2338r"> </span></div></div></div> <div class="actions no-print svelte-b2338r"><div class="save-section svelte-b2338r"><input type="text" placeholder="Name this estimate (e.g., Kitchen Reno)" class="svelte-b2338r"/> <button class="save-button svelte-b2338r">Save Estimate</button></div> <button class="print-button svelte-b2338r">Print or Save as PDF</button></div></div>',1);function Kt(O,z){vt(z,!1);const u=()=>M(gt,"$page",D),A=()=>M(K,"$estimateHistory",D),[D,B]=ht();let i=j({items:[],subtotal:0,laborCost:0,tax:0,total:0,hours:0}),c=j("");lt(()=>{u().state&&u().state.items?U(i,u().state):history.state&&history.state.items&&U(i,history.state)});function G(){window.print()}function J(){if(!s(c).trim()){alert("Please enter a name for the estimate.");return}const r={id:Date.now(),name:s(c),date:new Date().toISOString(),...s(i)};St(K,[r,...A()]),window.location.href="/ElecCalc/history"}nt();var w=wt();_t("b2338r",r=>{mt(()=>{ut.title="Final Receipt"})});var L=ct(w);xt(L,{title:"Final Receipt",backHref:"/estimate"});var k=a(L,2),b=e(k),d=e(b),Q=a(e(d),2);{var V=r=>{var o=Ut();dt(o,5,()=>s(i).items,v=>v.id,(v,l)=>{var x=$t(),$=e(x),rt=e($);t($);var N=a($,2),it=e(N,!0);t(N),t(x),T(ot=>{n(rt,`${s(l).name??""} x ${s(l).quantity??""}`),n(it,ot)},[()=>(s(l).price*s(l).quantity).toLocaleString("en-US",{style:"currency",currency:"USD"})]),p(v,x)}),t(o),p(r,o)},W=r=>{var o=Dt();p(r,o)};bt(Q,r=>{s(i).items.length>0?r(V):r(W,!1)})}t(d);var H=a(d,4),_=a(e(H),2),P=a(e(_),2),X=e(P,!0);t(P),t(_);var f=a(_,2),y=e(f),Y=e(y);t(y);var E=a(y,2),Z=e(E,!0);t(E),t(f);var h=a(f,2),R=a(e(h),2),tt=e(R,!0);t(R),t(h);var q=a(h,2),C=a(e(q),2),et=e(C,!0);t(C),t(q),t(H),t(b);var F=a(b,2),S=e(F),g=e(S);ft(g);var st=a(g,2);t(S);var at=a(S,2);t(F),t(k),T((r,o,v,l)=>{n(X,r),n(Y,`Labor (${s(i).hours??""} hours)`),n(Z,o),n(tt,v),n(et,l)},[()=>s(i).subtotal.toLocaleString("en-US",{style:"currency",currency:"USD"}),()=>s(i).laborCost.toLocaleString("en-US",{style:"currency",currency:"USD"}),()=>s(i).tax.toLocaleString("en-US",{style:"currency",currency:"USD"}),()=>s(i).total.toLocaleString("en-US",{style:"currency",currency:"USD"})]),yt(g,()=>s(c),r=>U(c,r)),I("click",st,J),I("click",at,G),p(O,w),pt(),B()}export{Kt as component};
