import{f as d,a as p,s as o,e as la}from"../chunks/DYQIaMgs.js";import{i as na}from"../chunks/CTVf-Cpm.js";import{aa as oa,ab as ca,ac as ma,ad as B,ae as pa,af as $,u as v,ag as da,a,s as ua,V as _a,d as fa,ah as r,ai as t,aj as s}from"../chunks/DOyfLbYF.js";import{i as C}from"../chunks/CBJRxKJI.js";import{e as ya,i as za}from"../chunks/7ZlRXt7D.js";import{h as ga,e as Sa}from"../chunks/BfN4VpFQ.js";import{s as ha,a as F}from"../chunks/DYW5j25u.js";import{p as xa}from"../chunks/Ccf3Eewp.js";import{P as ba}from"../chunks/Xtv6WyWT.js";var $a=d('<li class="svelte-1m639vz"><span class="svelte-1m639vz"> </span> <span class="svelte-1m639vz"> </span></li>'),Ua=d('<ul class="item-list svelte-1m639vz"></ul>'),Da=d("<p>No items in this estimate.</p>"),La=d('<div class="receipt-details svelte-1m639vz"><p class="date svelte-1m639vz"> </p> <div class="section svelte-1m639vz"><h2 class="svelte-1m639vz">Itemized Breakdown</h2> <!></div> <hr class="svelte-1m639vz"/> <div class="section svelte-1m639vz"><h2 class="svelte-1m639vz">Summary</h2> <div class="summary-item svelte-1m639vz"><span class="svelte-1m639vz">Subtotal</span> <span class="svelte-1m639vz"> </span></div> <div class="summary-item svelte-1m639vz"><span class="svelte-1m639vz"> </span> <span class="svelte-1m639vz"> </span></div> <div class="summary-item svelte-1m639vz"><span class="svelte-1m639vz">Tax</span> <span class="svelte-1m639vz"> </span></div> <div class="summary-item total svelte-1m639vz"><span class="svelte-1m639vz">Total</span> <span class="svelte-1m639vz"> </span></div></div></div> <button class="print-button no-print svelte-1m639vz">Print or Save as PDF</button>',1),ka=d('<p class="error-message svelte-1m639vz">Estimate not found.</p>'),wa=d('<!> <div class="container svelte-1m639vz"><!></div>',1);function Ca(N,R){oa(R,!1);const U=()=>F(xa,"$page",L),D=()=>F(Sa,"$estimateHistory",L),[L,A]=ha();let e=_a(null);function G(){window.print()}ca(()=>(U(),D()),()=>{const i=parseInt(U().params.id,10);ua(e,D().find(m=>m.id===i))}),ma(),na();var k=wa();ga("1m639vz",i=>{$(()=>{da.title=`View Estimate: ${a(e),v(()=>a(e)?a(e).name:"")??""}`},void 0,void 0,void 0,!0)});var w=B(k);{let i=fa(()=>(a(e),v(()=>a(e)?a(e).name:"Estimate Details")));ba(w,{get title(){return a(i)},backHref:"`history"})}var H=r(w,2),J=t(H);{var K=i=>{var m=La(),_=B(m),f=t(_),O=t(f);s(f);var y=r(f,2),Q=r(t(y),2);{var W=n=>{var c=Ua();ya(c,5,()=>(a(e),v(()=>a(e).items)),za,(x,l)=>{var u=$a(),b=t(u),ra=t(b);s(b);var j=r(b,2),va=t(j,!0);s(j),s(u),$(ia=>{o(ra,`${a(l),v(()=>a(l).name)??""} (x${a(l),v(()=>a(l).quantity)??""})`),o(va,ia)},[()=>(a(l),v(()=>(a(l).price*a(l).quantity).toLocaleString("en-US",{style:"currency",currency:"USD"})))]),p(x,u)}),s(c),p(n,c)},X=n=>{var c=Da();p(n,c)};C(Q,n=>{a(e),v(()=>a(e).items.length>0)?n(W):n(X,!1)})}s(y);var P=r(y,4),z=r(t(P),2),q=r(t(z),2),Y=t(q,!0);s(q),s(z);var g=r(z,2),S=t(g),Z=t(S);s(S);var E=r(S,2),aa=t(E,!0);s(E),s(g);var h=r(g,2),I=r(t(h),2),ea=t(I,!0);s(I),s(h);var T=r(h,2),V=r(t(T),2),sa=t(V,!0);s(V),s(T),s(P),s(_);var ta=r(_,2);$((n,c,x,l,u)=>{o(O,`Saved on ${n??""}`),o(Y,c),o(Z,`Labor (${a(e),v(()=>a(e).hours)??""} hrs)`),o(aa,x),o(ea,l),o(sa,u)},[()=>(a(e),v(()=>new Date(a(e).date).toLocaleDateString())),()=>(a(e),v(()=>a(e).subtotal.toLocaleString("en-US",{style:"currency",currency:"USD"}))),()=>(a(e),v(()=>a(e).laborCost.toLocaleString("en-US",{style:"currency",currency:"USD"}))),()=>(a(e),v(()=>a(e).tax.toLocaleString("en-US",{style:"currency",currency:"USD"}))),()=>(a(e),v(()=>a(e).total.toLocaleString("en-US",{style:"currency",currency:"USD"})))]),la("click",ta,G),p(i,m)},M=i=>{var m=ka();p(i,m)};C(J,i=>{a(e)?i(K):i(M,!1)})}s(H),p(N,k),pa(),A()}export{Ca as component};
